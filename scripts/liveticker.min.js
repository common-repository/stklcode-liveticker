(function(){var apiURL;var pollInterval;var ticker;var init=function(){var updateNow=!1;var c=0;if('undefined'===typeof scliveticker){return}
apiURL=scliveticker.api+'wp/v2/scliveticker_tick';pollInterval=scliveticker.poll_interval;ticker=[].map.call(document.querySelectorAll('div.wp-block-scliveticker-ticker.sclt-ajax'),function(elem){var o=parseElement(elem,!1,++c);if('0'===o.lastPoll){updateNow=!0}
return o});ticker.concat([].map.call(document.querySelectorAll('div.wp-widget-scliveticker-ticker.sclt-ajax'),function(elem){var o=parseElement(elem,!0,++c);if('0'===o.lastPoll){updateNow=!0}
return o}));if((0<ticker.length)&&0<pollInterval){if(updateNow){update()}else{setTimeout(update,pollInterval)}}};var parseElement=function(elem,widget,n){var list=elem.querySelector('ul');var last=elem.getAttribute('data-sclt-last');elem.id='sclt-'+n;if(!list){list=document.createElement('ul');elem.appendChild(list)}else{[].forEach.call(elem.querySelectorAll('li.sclt-tick'),function(li){var id=li.getAttribute('data-sclt-tick-id');if(id){li.id='sclt-'+n+'-'+id;li.removeAttribute('data-sclt-tick-id')}})}
return{id:n,ticker:elem.getAttribute('data-sclt-ticker'),limit:elem.getAttribute('data-sclt-limit'),lastPoll:last,ticks:list,isWidget:widget,updating:!1,}};var update=function(){ticker.forEach(function(t){var xhr,query;if(t.updating){return}
t.updating=!0;xhr=new XMLHttpRequest();query='?ticker='+encodeURI(t.ticker)+'&limit='+encodeURI(t.limit)+'&last='+encodeURI(t.lastPoll);xhr.open('GET',apiURL+query,!0);xhr.addEventListener('load',function(){var updateResp;try{updateResp=JSON.parse(this.responseText);if(updateResp){updateResp.reverse();updateResp.forEach(function(u){addTick(t,u)})}
t.updating=!1}catch(e){console.warn('Liveticker AJAX update failed, stopping automatic updates.')}});xhr.send()});setTimeout(update,pollInterval)};var addTick=function(t,u){var li=document.createElement('li');var time=document.createElement('span');var title=document.createElement('span');var content=document.createElement('div');var cls=t.isWidget?'sclt-widget':'sclt-tick';var old;var scripts=[];time.classList.add(cls+'-time');time.innerText=u.modified_rendered;title.classList.add(cls+'-title');title.innerText=u.title.rendered;content.classList.add(cls+'-content');content.innerHTML=u.content.rendered;if(scliveticker.embedded_script){Array.prototype.forEach.call(content.getElementsByTagName('script'),function(script){var script2;if(script.src){script.parentNode.removeChild(script);script2=document.createElement('script');Array.prototype.forEach.call(script.attributes,function(a){script2.setAttribute(a.nodeName,a.nodeValue)});document.head.appendChild(script2)}else{scripts.push(script)}})}
li.id='sclt-'+t.id+'-'+u.id;li.classList.add(cls);li.appendChild(time);li.appendChild(title);li.appendChild(content);old=document.getElementById('sclt-'+t.id+'-'+u.id);if(old){t.ticks.replaceChild(li,old)}else{t.ticks.insertBefore(li,t.ticks.firstChild)}
t.lastPoll=u.date_gmt;t.ticks.parentNode.setAttribute('data-sclt-last',u.date_gmt);if(0<t.limit){[].slice.call(t.ticks.getElementsByTagName('li'),t.limit).forEach(function(l){l.remove()})}
scripts.forEach(function(script){try{eval(script.innerHTML)}catch(e){console.warn('Failed to evaluate embedded script.')}})};document.addEventListener('DOMContentLoaded',function(){init()})}())